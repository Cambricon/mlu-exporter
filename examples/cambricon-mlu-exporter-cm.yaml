# Copyright 2020 Cambricon, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: v1
data:
  metrics.yaml: |
    cndev:
      temperature:
        name: "temperature"
        help: "The temperature of Cambricon MLU, unit is 'celsius'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          cluster: "cluster"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      health:
        name: "health"
        help: "The health state of Cambricon MLU, 1 means health, 0 means sick"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      memory_total:
        name: "memory_total"
        help: "The total physical memory of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      memory_used:
        name: "memory_used"
        help: "The used physical memory of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      memory_utilization:
        name: "memory_utilization"
        help: "The memory utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      utilization:
        name: "utilization"
        help: "The utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      capacity:
        name: "capacity"
        help: "The capacity metric of Cambricon MLU, unit is 'T'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      usage:
        name: "usage"
        help: "The usage metric of Cambricon MLU, unit is 'T'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      core_utilization:
        name: "core"
        help: "The utilization metric of Cambricon MLU core, unit is '%'"
        labels:
          core: "core"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      fan_speed:
        name: "fan_speed"
        help: "Fan speed of Cambricon MLU, unit is 'rpm', '-1' means no fan on MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      power_usage:
        name: "power_usage"
        help: "The power usage of Cambricon MLU, unit is 'w'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      version:
        name: "version"
        help: "The version info of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      virtual_function_memory_utilization:
        name: "virtual_function_memory_utilization"
        help: "The memory utilization of Cambricon MLU VF, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          vf: "vf"
      virtual_function_utilization:
        name: "virtual_function_utilization"
        help: "The utilization of Cambricon MLU VF, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          vf: "vf"
      pcie_info:
        name: "pcie_info"
        help: " The pcie information of MLU"
        labels:
          pcie_slot: "pcie_slot"
          pcie_subsystem: "pcie_subsystem"
          pcie_device_id: "pcie_device_id"
          pcie_vendor: "pcie_vendor"
          pcie_subsystem_vendor: "pcie_subsystem_vendor"
          pcie_id: "pcie_id"
          pcie_speed: "pcie_speed"
          pcie_width: "pcie_width"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      chip_cpu_utilization:
        name: "chip_cpu_utilization"
        help: "The utilization of Cambricon MLU chip cpu, unit is '%'"
        labels:
          cpu_core: "cpu_core"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      virtual_memory_total:
        name: "virtual_memory_total"
        help: "The total virtual memory of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      virtual_memory_used:
        name: "virtual_memory_used"
        help: "The used virtual memory of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      arm_os_memory_total:
        name: "arm_os_memory_total"
        help: "The total arm os memory of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      arm_os_memory_used:
        name: "arm_os_memory_used"
        help: "The used arm os memory of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      video_codec_utilization:
        name: "video_codec_utilization"
        help: "The utilization of Cambricon MLU video codec, unit is '%'"
        labels:
          core: "vpu_core"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      image_codec_utilization:
        name: "image_codec_utilization"
        help: "The utilization of Cambricon MLU image codec, unit is '%'"
        labels:
          core: "jpu_core"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      tiny_core_utilization:
        name: "tiny_core_utilization"
        help: "The utilization of Cambricon MLU image codec, unit is '%'"
        labels:
          core: "tiny_core"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      numa_node_id:
        name: "numa_node_id"
        help: "The NUMA node id of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ddr_data_width:
        name: "ddr_data_width"
        help: "The DDR data width of Cambricon MLU, unit is 'B'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ddr_band_width:
        name: "ddr_band_width"
        help: "The DDR band width of Cambricon MLU, unit is 'B/ns'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_address_forbidden_error_total:
        name: "ecc_address_forbidden_error_total"
        help: "The ECC address forbidden error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_corrected_error_total:
        name: "ecc_corrected_error_total"
        help: "The ECC corrected error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_multiple_error_total:
        name: "ecc_multiple_error_total"
        help: "The ECC multiple error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_multiple_multiple_error_total:
        name: "ecc_multiple_multiple_error_total"
        help: "The ECC multiple multiple error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_multiple_one_error_total:
        name: "ecc_multiple_one_error_total"
        help: "The ECC multiple one error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_one_bit_error_total:
        name: "ecc_one_bit_error_total"
        help: "The ECC one bit error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_error_total:
        name: "ecc_error_total"
        help: "The ECC total error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      ecc_uncorrected_error_total:
        name: "ecc_uncorrected_error_total"
        help: "The ECC uncorrected error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_p2p_transfer_capability:
        name: "mlulink_p2p_transfer_capability"
        help: "The p2p transfer capability of Cambricon MLU MLULink, '0' means 'disable', '1' means 'enable'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_interlaken_serdes_capability:
        name: "mlulink_interlaken_serdes_capability"
        help: "The interlaken serdes capability of Cambricon MLU MLULink, '0' means 'disable', '1' means 'enable'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_cntr_read_byte_total:
        name: "mlulink_cntr_read_byte_total"
        help: "The cntr read byte counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_cntr_read_package_total:
        name: "mlulink_cntr_read_package_total"
        help: "The cntr read package counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_cntr_write_byte_total:
        name: "mlulink_cntr_write_byte_total"
        help: "The cntr write byte counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_cntr_write_package_total:
        name: "mlulink_cntr_write_package_total"
        help: "The cntr write package counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_corrected_total:
        name: "mlulink_err_corrected_total"
        help: "The corrected error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_crc24_total:
        name: "mlulink_err_crc24_total"
        help: "The CRC24 error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_crc32_total:
        name: "mlulink_err_crc32_total"
        help: "The CRC32 error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_ecc_double_total:
        name: "mlulink_err_ecc_double_total"
        help: "The ECC double error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_fatal_total:
        name: "mlulink_err_fatal_total"
        help: "The fatal error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_replay_total:
        name: "mlulink_err_replay_total"
        help: "The replay error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_err_uncorrected_total:
        name: "mlulink_err_uncorrected_total"
        help: "The uncorrected error counts of Cambricon MLU MLULink"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_port_mode:
        name: "mlulink_port_mode"
        help: "The port mode of Cambricon MLU MLULink, '0' means 'uninitialized', '1' means 'all support', '2' means 'mlulink', '3' means 'roce'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_speed_format:
        name: "mlulink_speed_format"
        help: "The speed format of Cambricon MLU MLULink, '0' means 'NRZ', '1' means 'PM4'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_speed:
        name: "mlulink_speed"
        help: "The speed value of Cambricon MLU MLULink, unit is 'GB/s'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_status:
        name: "mlulink_status"
        help: "The status of Cambricon MLU MLULink, '0' means 'disable', '1' means 'enable'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_serdes_status:
        name: "mlulink_serdes_status"
        help: "The serdes status of Cambricon MLU MLULink, '0' means 'disable', '1' means 'enable'"
        labels:
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_version:
        name: "mlulink_version"
        help: "The version of Cambricon MLU MLULink"
        labels:
          link_version: "link_version"
          link: "link"
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      d2d_crc_error_total:
        name: "d2d_crc_error_total"
        help: "The d2d CRC error counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      d2d_crc_error_overflow_total:
        name: "d2d_crc_error_overflow_total"
        help: "The d2d CRC error overflow counts of Cambricon MLU"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      process_ipu_utilization:
        name: "process_ipu_utilization"
        help: "The process ipu utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          pid: "pid"
      process_jpu_utilization:
        name: "process_jpu_utilization"
        help: "The process jpu utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          pid: "pid"
      process_memory_utilization:
        name: "process_memory_utilization"
        help: "The process memory utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          pid: "pid"
      process_vpu_decode_utilization:
        name: "process_vpu_decode_utilization"
        help: "The process vpu decode utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          pid: "pid"
      process_vpu_encode_utilization:
        name: "process_vpu_encode_utilization"
        help: "The process vpu encode utilization of Cambricon MLU, unit is '%'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          pid: "pid"
    podresources:
      allocated:
        name: "allocated"
        help: "The allocated number of Cambricon MLUs in a node"
        labels:
          model: "model"
          type: "type"
          driver: "driver"
          node: "node"
      container:
        name: "container"
        help: "The k8s container info of Cambricon MLUs allocated"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
          namespace: "namespace"
          pod: "pod"
          container: "container"
          vf: "vf"
    cnpapi:
      pcie_read:
        name: "pcie_read"
        help: "The pcie read io metric of Cambircon MLU, unit is 'GB'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      pcie_write:
        name: "pcie_write"
        help: "The pcie write io metric of Cambircon MLU, unit is 'GB'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      dram_read:
        name: "dram_read"
        help: "The dram read io metric of Cambircon MLU, unit is 'GB'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      dram_write:
        name: "dram_write"
        help: "The dram write io metric of Cambircon MLU, unit is 'GB'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_read:
        name: "mlulink_read"
        help: "The mlulink read io metric of Cambircon MLU, unit is 'GB'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
      mlulink_write:
        name: "mlulink_write"
        help: "The mlulink write io metric of Cambircon MLU, unit is 'GB'"
        labels:
          mlu: "mlu"
          model: "model"
          type: "type"
          sn: "sn"
          uuid: "uuid"
          node: "node"
          mcu: "mcu"
          driver: "driver"
    host:
      host_cpu_total:
        name: "host_cpu_total"
        help: "The cpu total metric of host machine, unit is the same as which in /proc/stat"
        labels:
          node: "node"
      host_cpu_idle:
        name: "host_cpu_idle"
        help: "The cpu idle metric of host machine, unit is the same as which in /proc/stat"
        labels:
          node: "node"
      host_memory_total:
        name: "host_memory_total"
        help: "The memory total metric of host machine, unit is 'GB'"
        labels:
          node: "node"
      host_memory_free:
        name: "host_memory_free"
        help: "The memory idle metric of host machine, unit is 'GB'"
        labels:
          node: "node"
kind: ConfigMap
metadata:
  labels:
    app: mlu-monitoring
  name: cambricon-mlu-exporter
  namespace: kube-system
